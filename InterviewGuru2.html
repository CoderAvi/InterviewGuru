<!DOCTYPE html>
<head>

<title> The Interview Guru </title>
<meta charset="utf-8">

<style>

circle {
  fill: rgb(31, 119, 180);
  fill-opacity: .25;
  stroke: rgb(31, 119, 180);
  stroke-width: 1px;
}

.leaf circle {
  fill: #ff7f0e;
  fill-opacity: 1;
}

text {
  font: 10px sans-serif;
}

input[name="inputbox"] {
  width: 425px;
}

input[name="button"] {
  width: 100px;
}


</style>



<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="raphael-min.js"></script>
<script>
function showDistribution() {


d3.select("svg")
       .remove();
d3.select("#data").remove();
d3.select("body").append("div").attr("id","data");

var diameter = 900,
    format = d3.format(",d");

var company = document.getElementById('company').value;

d3.json("cluster3c.json", function(error, root) {
  	if (error) return alert(error);
	
	var svg = d3.select("chart").append("svg")
		  .attr("width", diameter)
		  .attr("height", diameter/1.5)
		  .append("g")
	    	  .attr("transform", "translate(0,25)");

//	alert("inside cluster3c load");
	var node = svg.selectAll(".node") //its implicitly understood that the one that follows t tag also brings to t
	      	.data([{"r":100,"x":100,"y":100,"c":"Microsoft","t":"Algos"},{"r":50,"x":180,"y":100,"c":"Amazon","t":""},
		{"r":100,"x":400,"y":100,"c":"Microsoft","t":"Hash Tables"},{"r":50,"x":480,"y":100,"c":"Amazon","t":""},
		{"r":100,"x":100,"y":400,"c":"Microsoft","t":"Strings"},{"r":50,"x":180,"y":400,"c":"Amazon","t":""}])
	    	.enter().append("g")
	      	.attr("class", function(d) { return "node"; })
	      	.attr("transform", function(d) { return "translate(" + d["x"] + "," + d["y"] + ")"; });

  	node.append("title")
      	.text(function(d) { return d["c"]; });

  	node.append("circle")
      	.attr("r", function(d) { return d["r"]; });

  	node.append("text")
      	.attr("dy", ".3em")
      	.style("text-anchor", "middle")
      	.text(function(d) { return d["c"]; });

	node.append("text")
	//.attr("x",function(d) {return d["x"]-d["r"]-10;})
	//.attr("y",function(d) {return d["y"]-d["r"]-10;})
      	.attr("dy", function(d) {return (-1)*(parseInt(d["r"])+5);})
	.text(function(d) {return d["t"];});


d3.json("questions2.json", function(error, root) {
  	if (error) return alert(error);
  	q_list=root[company];
 	d3.select("#data").selectAll("div")
    	.data(q_list)
  	.enter().append("p")
    	.text(function(d) { return d; });});});

var f = document.createElement("form");
var i = document.createElement("input");
i.setAttribute('type',"text");
i.setAttribute('name',"inputbox2");
i.setAttribute('placeholder',"E.g: Algorithms");
var b = document.createElement("input");
b.setAttribute('type',"button");
b.setAttribute('name',"button2");
b.setAttribute('value',"Submit");
b.setAttribute('onClick',"showQuestions()");
f.appendChild(i);
f.appendChild(b);
document.getElementById("data")






}





</script>

</head>
<body>
<div align=center>
<h2>
Welcome to Interview Guru!!
</h2>
</div>
<div align=center>
<form name="myform">
	Enter a company name in the box and click Submit to see the distribution and some sample questions: <BR>
	<p><input type="text" id="company" name="inputbox" placeholder="E.g: Microsoft"></p>
	<p><input type="button" name="button" value="Submit" onClick="showDistribution()"></p>
</form>
</div>
<div align=center>
<chart></chart>
</div>
<div align=center>
<qsel>
</qsel>
</div>

<div id="data">
<!--Questions go here.-->
</div>
</body>
</html>
